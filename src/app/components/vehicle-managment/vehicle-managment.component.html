<!-- vehicle-list.component.html -->
<div class="container">
  <h2>Vehicle Management</h2>

  <!-- Filter Section -->
  <div class="filter-section">
    <input type="text" [(ngModel)]="searchTerm" (input)="filterVehicles()"
      placeholder="Filter by plate number, route, or driver" class="form-control">
  </div>

  <!-- Vehicle Form -->
  <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="vehicle-form">
    <div class="form-row">
      <div class="form-group">
        <label>Plate Number:</label>
        <input type="text" formControlName="plateNumber" class="form-control"
          [class.is-invalid]="vehicleForm.get('plateNumber')?.invalid && vehicleForm.get('plateNumber')?.touched">
        <div class="invalid-feedback" *ngIf="vehicleForm.get('plateNumber')?.invalid">
          Valid plate number required (max 10 alphanumeric characters)
        </div>
      </div>

      <div class="form-group">
        <label>Route Name:</label>
        <input type="text" formControlName="routeName" class="form-control"
          [class.is-invalid]="vehicleForm.get('routeName')?.invalid && vehicleForm.get('routeName')?.touched">
        <div class="invalid-feedback">
          Route name is required
        </div>
      </div>

      <div class="form-group">
        <label>Driver Name:</label>
        <input type="text" formControlName="driverName" class="form-control"
          [class.is-invalid]="vehicleForm.get('driverName')?.invalid && vehicleForm.get('driverName')?.touched">
        <div class="invalid-feedback">
          Driver name is required
        </div>
      </div>

      <div class="form-group">
        <label>Status:</label>
        <select formControlName="status" class="form-control">
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
        </select>
      </div>
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn btn-primary" [disabled]="!vehicleForm.valid">
        {{ isEditing ? 'Update' : 'Add' }} Vehicle
      </button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Cancel</button>
    </div>
  </form>

  <!-- Vehicles List -->
  <div class="vehicle-list">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Plate Number</th>
          <th>Route Name</th>
          <th>Driver Name</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vehicle of filteredVehicles">
          <td>{{ vehicle.plateNumber }}</td>
          <td>{{ vehicle.routeName }}</td>
          <td>{{ vehicle.driverName }}</td>
          <td>
            <span [class.badge-active]="vehicle.status === 'active'"
              [class.badge-inactive]="vehicle.status === 'inactive'" class="badge">
              {{ vehicle.status }}
            </span>
          </td>
          <td>
            <button class="btn btn-sm btn-warning" (click)="editVehicle(vehicle)">Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteVehicle(vehicle.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
